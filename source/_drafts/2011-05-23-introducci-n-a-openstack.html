---
layout: post
title: "Introducción a OpenStack"
date: 2011-05-23
comments: false
categories:
 - openstack
 - cloud
 - iaas
---

<div class='post'>
<div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: small;"><span style="font-family: verdana, geneva;">Estas últimas semanas me estoy dando una panzada de leer arítculos, noticias, proyectos, manuales... y no hago más que repetir: tengo que escribir sobre esto, tengo que escribir sobre esto. Pero para no empezar la casa por el tejado y no empezar a escribir cosas deslabazadas intentaré seguir el orden que tenía en mente.</span></span></div><div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: small;"><span style="font-family: verdana, geneva;"><br /></span></span></div><div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: small;"><span style="font-family: verdana, geneva;">En el útlimo post hacía referencia a la arquitectura básica del Cloud. Hoy le toca el turno a los cimientos de esa arquitectura, a los servicios de infraestructura IaaS. En lugar de abordarlo de forma teórica vamos a poner el foco en uno de los proyectos que más ruído está haciendo últimamente: <a href="http://www.openstack.org/">OpenStack</a>.</span></span></div><div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: small;"><span style="font-family: verdana, geneva;"><br /></span></span></div><div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: small;"><span style="font-family: verdana, geneva;">En julio de 2010 <a href="http://www.rackspace.com/cloud/">RackSpace</a> y la NASA deciden aunar esfuerzos y donar a la comunidad un proyecto que permita ofrecer servicios de infraestructura con tecnología y desarrollo libre.</span></span></div><div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: small;"><span style="font-family: verdana, geneva;"><br /></span></span></div><div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: small;"><span style="font-family: verdana, geneva;">Bajo este amparo surgen una serie de proyectos con propósitos específicos</span></span></div><div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: small;"><span style="font-family: verdana, geneva; font-size: x-small;"><br /></span></span></div><div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: large;"><a href="http://openstack.org/projects/compute/">OpenStack Compute</a></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif; font-size: x-small;"><br /></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">Su misión principal es la de orquestar el aprovisionamiento de las máquinas virtuales y la conectividad de red. Organiza la infraestructura en modo de proyectos de modo que cada usuario pertenece a uno o varios proyectos y tiene a su disposición los recursos asignados a cada proyecto.</span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;"><br /></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">Sus principales características:</span></div><br /><ul><li style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">Es independiente del hardware.</span></li><li style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">Es independiente del hypervisor.</span></li><li style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">Escalable a múltiples nodos.</span></li><li style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;"><a href="http://en.wikipedia.org/wiki/Multitenancy">Multitenant</a>. Varios usuarios pueden compartir mismas instancias con separación y asilamiento completo de los datos.</span></li><li style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">API completa y compatible con Amazon EC2 API.</span></li><li style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">Paneles de control para una mejor gestión y administración.</span></li></ul><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">Uno de los aspectos que considero muy interesante es el hecho de que la plataforma no incluye ningún software de virtualización. En lugar de eso define drivers que interactúan con las capas que puedan proporcionar esos mecanismos y los expone a través de una API basada en web.</span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;"><br /></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">Un ejemplo de este concepto se puede ver en la <a href="http://nova.openstack.org/vmwareapi_readme.html">implementación del módulo que soporta una plataforma ESX/ESXi para que vSphere sea el proveedor</a>.</span></div><br /><div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: large;"><a href="http://openstack.org/projects/storage/">OpenStack Object Storage</a></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva; font-size: x-small;"><br /></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">Su misión principal es la de dotar de una infraestructura de almacenamiento totalmente redundante y tolerante a fallos. No se trata de un sistema de ficheros distribuído sino un sistema de almacenamiento de información más o menos permanente. Los objetos que encajan en este tipo de almacenamiento son: mails, fotos, las propias imágenes virtualizadas, backups, ...</span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;"><br /></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">El sistema es capaz de garantizar la redundancia de la información y la disponibilidad a través de un conjunto de cluster que replica la información entre los nodos activos que pueden ir creciendo de forma horizontal.</span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;"><br /></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: verdana, geneva;">Sus principales características:</span></div><div style="text-align: justify;"></div><ul><li><span class="Apple-style-span" style="font-family: verdana, geneva;">Plataforma de almacenamiento cloud multiusuario</span></li><li><span class="Apple-style-span" style="font-family: verdana, geneva;">Escalabilidad horizontal total</span></li><li><span class="Apple-style-span" style="font-family: verdana, geneva;">Tamaño de almacenamiento prácticamente ilimitado</span></li></ul><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-family: verdana, geneva; font-size: large;"><a href="http://openstack.org/projects/image-service/">OpenStack Image Service</a></span></div><div style="font-family: 'Times New Roman'; font-size: medium; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; text-align: justify;"></div><br /><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;">Su misión principal es la de proporcionar los servicios de descubrimiento, registro y aprovisionamiento de las imágenes de las máquinas virtuales. Proporciona un interfaz REST estándar para el uso de los distintos servicios.</span></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><br /></span></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;">Los formatos soportados de las imágenes virtuales son:</span></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; text-align: justify;"></div><ul><li><span class="Apple-style-span" style="font-family: Verdana, sans-serif;">Raw</span></li><li><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Machine (kernel/ramdisk AMI)</span></span></li><li><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">VHD (Hyper-V)</span></span></li><li><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">VDI (VirtualBox)</span></span></li><li><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">qcow2 (Qemu/KVM)</span></span></li><li><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">VMDK (VMWare)</span></span></li><li><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">OVF</span></span></li></ul><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Vista una pequeña introducción (sacada de la propia página de los proyectos) pasemos a ver cómo podemos montarnos, a modo de concepto, nuestro propia IaaS</span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif; font-size: large;"><span class="Apple-style-span" style="line-height: 18px;">Instalación de OpenStack</span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Requisitos:</span></span></div><div><ul><li><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Ubuntu 10.04</span></span></li><li><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Dos interfaces de red. Uno para direccionamiento público y otro para direccionamiento privado</span></span></li><li><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Almacenamiento de 1Gb (mínimo) para albergar las imágenes</span></span></li></ul><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Partimos de una instalación básica de Ubuntu 10.04.</span></span></div></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Nova Compute utiliza rabbitmq para el intercambio de mensajería y coordinación de los nodos y servicios.</span></span>&nbsp;</div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><div class="separator" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em; text-align: center;"><img border="0" height="123" src="http://3.bp.blogspot.com/-v9_6l5wTfRA/TeZK12FLwHI/AAAAAAAAARU/Ws41nH-qoCE/s400/001_install_rabbitmq.png" width="400" /></div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Una vez instalado rabbitmq nos aseguramos de configurar bien <i>/etc/hosts</i>&nbsp;para que rabbitmq no tenga problemas a la hora de resolver los recursos</span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-Lm1_iLXdR58/TeZMCX_hb1I/AAAAAAAAARc/qsF5oB1MvlE/s1600/002_configure_etchosts.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="104" src="http://2.bp.blogspot.com/-Lm1_iLXdR58/TeZMCX_hb1I/AAAAAAAAARc/qsF5oB1MvlE/s320/002_configure_etchosts.png" width="320" /></a></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Instalamos <i>python-software-properties</i></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><i><br /></i></span></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-d2CKHQX51Qg/TeZNExnA5DI/AAAAAAAAARk/d6ej3FDTQ0o/s1600/003_install_python_software_properties.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="169" src="http://4.bp.blogspot.com/-d2CKHQX51Qg/TeZNExnA5DI/AAAAAAAAARk/d6ej3FDTQ0o/s400/003_install_python_software_properties.png" width="400" /></a></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><i><br /></i></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;">Configuramos nuestro repositorio para instalar los paquetes desde launchpad</span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-9n8czz0qwLk/TeZOGpzFBBI/AAAAAAAAARw/qdMcxlDLseo/s1600/004_adding_ppa_repository.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="55" src="http://2.bp.blogspot.com/-9n8czz0qwLk/TeZOGpzFBBI/AAAAAAAAARw/qdMcxlDLseo/s400/004_adding_ppa_repository.png" width="400" /></a></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div><div style="text-align: justify;"><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: Verdana, sans-serif;"><span class="Apple-style-span" style="line-height: 18px;"><br /></span></span></div></div>
